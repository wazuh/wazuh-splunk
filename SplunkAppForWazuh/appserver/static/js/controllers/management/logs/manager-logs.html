<div ng-cloak flex layout="column" class='wz-white-background'>
  <div layout="row" class="layout-row layout-align-end wz-white-background">
    <div class='wz-margin-left-10 wz-margin-top-12'>
      <span class="wz-text-link cursor-pointer" ui-sref='manager'>Management</span>
      <span> / Logs </span>
    </div>
    <div flex></div>
    <div style="margin-right:7px;" id='input1'></div>
  </div>

</div>

<!-- Nav bar -->
<md-nav-bar class="wz-nav-bar wz-margin-left-16 wz-margin-right-16" md-selected-nav-item="selectedNavTab">
  <md-nav-item class="wz-nav-item" md-nav-click="stopPropagation()" ui-sref="mg-status" name="status">Status
  </md-nav-item>
  <md-nav-item class="wz-nav-item" md-nav-click="stopPropagation()" ui-sref="mg-logs" name="logs">Logs</md-nav-item>
  <md-nav-item class="wz-nav-item" md-nav-click="stopPropagation()" ui-sref="mg-monitoring" name="monitoring">Cluster
  </md-nav-item>
  <md-nav-item class="wz-nav-item" md-nav-click="stopPropagation()" ui-sref="mg-reporting" name="reporting">Reporting
  </md-nav-item>
</md-nav-bar>

<!-- Filters and Realtime button section -->
<div ng-show="!loading" layout="row" layout-align="start start"
  class="wz-margin-left-10 wz-margin-right-600 less-25-side">


  <select class="input input-dropdown " flex id="categoryBox" ng-disabled="realtime"
    ng-model="category" ng-change="filter({name:'category',value:category})" aria-label="Logs category">
    <option value="all">All daemons</option>
    <option ng-repeat="daemon in daemons | orderObjectBy: 'title'" value="{{daemon.title}}">{{daemon.title}}</option>
  </select>

  <select  class="input input-dropdown wz-margin-left-10" flex id="levelBox" ng-disabled="realtime" ng-model="type_log"
    placeholder="Log level" class="md-no-underline" ng-change="filter({name:'type_log',value:type_log})"
    aria-label="Logs level">
    <option value="all">All log levels</option>
    <option value="info">Info</option>
    <option value="error">Error</option>
    <option value="warning">Warning</option>
    <option value="critical">Critical</option>
    <option value="debug">Debug</option>
  </select>

  <select flex ng-show='nodeList && nodeList.length' class="input input-dropdown wz-margin-left-10" id="categoryBox"
    ng-model="selectedNode" ng-change="changeNode(selectedNode)" aria-label="Logs category">
    <option ng-repeat="node in nodeList" value="{{node}}">{{node}}</option>
  </select>


  <!-- Switch to sort by timestamp -->
  <wz-kbn-switch class="switch-log" switch-model="sortFilter" switch-change="sort()" switch-text="Descending sort"></wz-kbn-switch>

</div>

<div layout="row" class="less-15-side">
  <!-- Search and play realtime buttons -->
  <input flex placeholder="Filter logs..." ng-model="custom_search" type="text"
    class="kuiLocalSearchInput ng-empty ng-pristine ng-scope ng-touched ng-valid wz-margin-top-4 height-36 wz-margin-left-10"
    aria-invalid="false" wz-enter="search(custom_search)">
  <button type="submit" aria-label="Search" class="btn height-32 wz-button-empty wz-margin-left-10 wz-margin-5"
    ng-click="search(custom_search)">
    <span>Search</span>
  </button>

  <button ng-if="!realtime" class="btn height-32 wz-button-empty wz-margin-left-10 wz-margin-right-10 wz-margin-5"
    ng-click="playRealtime()" aria-label="Play realtime button">
    <i class="fa fa-play fa-fw" aria-hidden="true"></i>
    Play realtime
  </button>

  <button ng-if="realtime" class="btn height-32 wz-button-empty wz-margin-left-10 wz-margin-right-10 wz-margin-5"
    ng-click="stopRealtime()" aria-label="Stop realtime button">
    <i class="fa fa-stop fa-fw" aria-hidden="true"></i>
    Stop realtime
  </button>

</div>
<!-- End Filters and Realtime button section -->

<!-- Logs section -->
<div layout="row" layout-padding ng-if="logsPath" ng-hide="true">
  <wazuh-table flex extra-limit="100" path="logsPath" implicit-sort="'timestamp'"
    keys="['timestamp',{value:'tag',size:2},'level',{value:'description',size:4,nosortable:true}]" rows-per-page="15">
  </wazuh-table>
</div>
<div layout="row" layout-padding ng-show="XMLContent && !emptyResults">
  <wz-config-viewer flex xmlcontent="XMLContent" hide-header="true" />
</div>
<!-- End Logs section -->

<!-- Empty results -->
<div layout="row" class="wz-margin-20" layout-padding ng-show="emptyResults">
    <div flex class="euiCallOut euiCallOut--warning wz-margin-top-17">
        <div class="euiCallOutHeader">
          <svg style="margin-top: -5px;" class="euiIcon euiIcon--medium euiCallOutHeader__icon" aria-hidden="true" xmlns="http://www.w3.org/2000/svg"
            xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16">
            <defs>
              <path id="help-a" d="M13.6 12.186l-1.357-1.358c-.025-.025-.058-.034-.084-.056.53-.794.84-1.746.84-2.773a4.977 4.977 0 0 0-.84-2.772c.026-.02.059-.03.084-.056L13.6 3.813a6.96 6.96 0 0 1 0 8.373zM8 15A6.956 6.956 0 0 1 3.814 13.6l1.358-1.358c.025-.025.034-.057.055-.084C6.02 12.688 6.974 13 8 13a4.978 4.978 0 0 0 2.773-.84c.02.026.03.058.056.083l1.357 1.358A6.956 6.956 0 0 1 8 15zm-5.601-2.813a6.963 6.963 0 0 1 0-8.373l1.359 1.358c.024.025.057.035.084.056A4.97 4.97 0 0 0 3 8c0 1.027.31 1.98.842 2.773-.027.022-.06.031-.084.056l-1.36 1.358zm5.6-.187A4 4 0 1 1 8 4a4 4 0 0 1 0 8zM8 1c1.573 0 3.019.525 4.187 1.4l-1.357 1.358c-.025.025-.035.057-.056.084A4.979 4.979 0 0 0 8 3a4.979 4.979 0 0 0-2.773.842c-.021-.027-.03-.059-.055-.084L3.814 2.4A6.957 6.957 0 0 1 8 1zm0-1a8.001 8.001 0 1 0 .003 16.002A8.001 8.001 0 0 0 8 0z"></path>
            </defs>
            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#help-a" fill-rule="evenodd"></use>
          </svg>
          <span class="euiCallOutHeader__title">No results match your search criteria</span>
        </div>
      </div>
</div>

<div layout="row" class="wz-margin-top-10 wz-margin-right-20">
  <span flex></span>
  <a class="small formatted-color" id="btnDownload" ng-click="downloadCsv()">
    <svg class="euiIcon euiIcon--medium" focusable="false" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path d="M9 10.114l1.85-1.943a.52.52 0 0 1 .77 0c.214.228.214.6 0 .829l-1.95 2.05a1.552 1.552 0 0 1-2.31 0L5.41 9a.617.617 0 0 1 0-.829.52.52 0 0 1 .77 0L8 10.082V1.556C8 1.249 8.224 1 8.5 1s.5.249.5.556v8.558zM4.18 6a.993.993 0 0 0-.972.804l-1.189 6A.995.995 0 0 0 2.991 14h11.018a1 1 0 0 0 .972-1.196l-1.19-6a.993.993 0 0 0-.97-.804H4.18zM6 5v1h5V5h1.825c.946 0 1.76.673 1.946 1.608l1.19 6A2 2 0 0 1 14.016 15H2.984a1.992 1.992 0 0 1-1.945-2.392l1.19-6C2.414 5.673 3.229 5 4.174 5H6z"></path></svg>&nbsp;Formatted
  </a>
</div>